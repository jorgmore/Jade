package es.ucm.jadedrools
 
import es.ucm.jadedrools.mapa.Mapa;
import es.ucm.jadedrools.mapa.TipoCasilla;
import es.ucm.jadedrools.mapa.Casilla;
import es.ucm.jadedrools.agentes.minero.Minero;

rule "movimientoMinero"
    when
        $min: Minero()
    then
        double mejorDistancia = 10000.0;
        int mejorNextX = $min.getX();
		int mejorNextY = $min.getY();
        
    	for (int i = -1; i <= 1; i++){
			for (int j = -1; j <= 1; j++){
				
				int a = Math.abs(($min.getX() + i) - $min.getX_mov());
            	int b = Math.abs(($min.getY() + j) - $min.getY_mov());
            	
            	//la distancia entre 2 puntos (entre el minero1 y el mineral)
            	double distancia = Math.sqrt(a*a + b*b);
            	
            	if (distancia < mejorDistancia){
            		mejorNextX = $min.getX() + i;
            		mejorNextY = $min.getY() + j;
            		mejorDistancia = distancia;
            	}
			}
		}
		
		$min.setX(mejorNextX);
		$min.setY(mejorNextY);
end